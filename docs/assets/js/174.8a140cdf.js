(window.webpackJsonp=window.webpackJsonp||[]).push([[174],{569:function(s,n,a){"use strict";a.r(n);var t=a(10),e=Object(t.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"应该知道的-npm-知识"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#应该知道的-npm-知识"}},[s._v("#")]),s._v(" 应该知道的 NPM 知识")]),s._v(" "),n("h2",{attrs:{id:"npm-init"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-init"}},[s._v("#")]),s._v(" npm init")]),s._v(" "),n("blockquote",[n("p",[n("code",[s._v("npm init")]),s._v(" 命令用来初始化一个简单的 "),n("code",[s._v("package.json")]),s._v(" 文件")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm init --yes 跳过输入，使用默认配置生成 package.json\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"自定义npm-init行为-mac"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义npm-init行为-mac"}},[s._v("#")]),s._v(" 自定义npm init行为（mac）")]),s._v(" "),n("ol",[n("li",[s._v("cd ~")]),s._v(" "),n("li",[s._v("touch .npm-init.js  创建npm-init.js")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" desc "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("prompt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'description?'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'A new package...'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" bar "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("prompt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bar?'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" count "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("prompt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'count?'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'42'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("key")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'value'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("foo")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("bar")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" bar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("count")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" count\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("prompt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name?'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cwd")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("split")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("pop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("version")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("prompt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'version?'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0.1.0'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("description")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" desc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("main")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'index.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h2",{attrs:{id:"dependenices-生成环境依赖"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dependenices-生成环境依赖"}},[s._v("#")]),s._v(" dependenices 生成环境依赖")]),s._v(" "),n("p",[s._v("下列安装方式会把依赖加入dependenices")]),s._v(" "),n("ol",[n("li",[s._v("npm install packageName")]),s._v(" "),n("li",[s._v("npm i packageName")]),s._v(" "),n("li",[s._v("npm i packageName -S")]),s._v(" "),n("li",[s._v("npm i packageName -save")]),s._v(" "),n("li",[s._v("npm i vue@3.0.1 -S 安装指导版本的vue")])]),s._v(" "),n("h2",{attrs:{id:"devdependenices-开发环境依赖"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#devdependenices-开发环境依赖"}},[s._v("#")]),s._v(" devDependenices 开发环境依赖")]),s._v(" "),n("p",[s._v("下列安装方式会把依赖加入devDependenices")]),s._v(" "),n("ol",[n("li",[s._v("npm install packageName -D")]),s._v(" "),n("li",[s._v("npm i packageName -D")]),s._v(" "),n("li",[s._v("npm i packageName  --save-dev")])]),s._v(" "),n("h2",{attrs:{id:"bin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#bin"}},[s._v("#")]),s._v(" bin")]),s._v(" "),n("blockquote",[n("p",[s._v("bin 字段指定了各个内部命令对应的可执行文件的位置。")]),s._v(" "),n("p",[s._v("如果全局安装模块，npm 会使用符号链接把可执行文件链接到 /usr/local/bin，")]),s._v(" "),n("p",[s._v("如果项目中安装，会链接到 ./node_modules/.bin/。")])]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"bin"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"vm2"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./bin/vm2"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"main"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#main"}},[s._v("#")]),s._v(" main")]),s._v(" "),n("blockquote",[n("p",[s._v("main 属性指定程序的主入口文件，其他项目在引用这个 npm 包时，实际上引入的是 lib/index 中暴露出去的模块。")])]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"main"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lib/index.js"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"npm-script"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-script"}},[s._v("#")]),s._v(" npm script")]),s._v(" "),n("blockquote",[n("p",[s._v("在生成的 package.json 文件中，npm 允许使用 scripts 字段定义脚本命令。")]),s._v(" "),n("p",[n("code",[s._v("npm run")]),s._v("不加参数可以查看当前项目的package.json 文件中的scripts脚本有哪些")]),s._v(" "),n("p",[s._v("我们每次在运行npm run xxx 的时候，系统会自动开始一个shell，然后在shell里执行脚本。所有shell能执行的都可以写到 scripts")]),s._v(" "),n("p",[s._v("比如终端输入 npm run whoiam, 会输出当前用户名 zepeng")]),s._v(" "),n("p",[s._v("node_modules/.bin目录下的脚本可以直接放在 scripts里面, 比如改目录下有 browserslist，\n则可以直接把这个browserslist加入scripts，然后直接 npm run browserslist")])]),s._v(" "),n("p",[n("code",[s._v("node_modules/.bin")]),s._v("下的脚本是从哪里来的呢？")]),s._v(" "),n("p",[s._v("npm install 安装的某个模块，如果模块在 package.json 中配置了 bin 属性，在安装时候会自动软链接到 node_modules/.bin 中")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dev"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vuepress dev"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  \n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vuepress build"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"whoiam"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"whoami"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"ls"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ls"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"browserslist"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"browserslist"')]),s._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nnpm run dev 会执行 vuepress dev\n\n直接执行 npm 会输出npm的可执行命令\n\n执行 npm run 会显示 当前的scripts的可执行脚本\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h2",{attrs:{id:"脚本默认值"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#脚本默认值"}},[s._v("#")]),s._v(" 脚本默认值")]),s._v(" "),n("ol",[n("li",[s._v("npm run start 默认执行的是 node server.js 。 前提是根目录下有server.js")]),s._v(" "),n("li",[s._v("npm run install 默认执行的是 node-gyp rebuild。前提是根目录下有 binding.gyp 文件")])]),s._v(" "),n("h2",{attrs:{id:"钩子-生命周期"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#钩子-生命周期"}},[s._v("#")]),s._v(" 钩子（生命周期）")]),s._v(" "),n("blockquote",[n("p",[s._v("npm 脚本有两个钩子，pre 和 post，当我们执行start脚本时候，start 的钩子就是 prestart 和 poststart。")]),s._v(" "),n("p",[s._v("当我们执行 npm run build 的时候，npm 会自动按照下面的顺序执行")]),s._v(" "),n("p",[s._v("npm run prebuild && npm run build && npm run postbuild")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{\n  scripts: {\n    "prebuild": "echo I run before the build script",\n    "build": "node index.js",\n    "postbuild": "echo I run after the build script"\n  }\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"env-环境变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#env-环境变量"}},[s._v("#")]),s._v(" env 环境变量")]),s._v(" "),n("blockquote",[n("p",[s._v("我们在执行 npm run 脚本时候, npm 会设置一些特殊的env环境变量。")])]),s._v(" "),n("p",[s._v("package.json中的所有字段，都会被设置为以npm_package_开头的环境变量。看个简单的例子")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('package.json内容如下\n{\n  "name": "gittest",\n  "scripts": {\n    "test": "echo \\"Error: no test specified\\" && exit 1",\n    "prebuild": "echo I run before the build script",\n    "build": "node index.js --mode=pro",\n    "postbuild": "echo I run after the build script"\n  },\n  "files": ["src","public"]\n}\n// 参数打印如下\n\n{\n  npm_package_gitHead: \'4aa504dab2de8b156c0a31a7b53c5513065cda2d\',\n  npm_package_scripts_prebuild: \'echo I run before the build script\',\n  npm_package_name: \'gittest\',\n  npm_package_scripts_build: \'node index.js --mode=pro\',\n  npm_package_version: \'\',\n  npm_package_scripts_test: \'echo "Error: no test specified" && exit 1\',\n  npm_package_scripts_postbuild: \'echo I run after the build script\',\n  npm_package_files_0: \'src\',\n  npm_package_files_1: \'public\'\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("p",[s._v("npm 相关的所有配置也会被设置为以npm_config_")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("{\n  npm_config_send_metrics: '',\n  npm_config_save_bundle: '',\n  npm_config_umask: '0022',\n  npm_config_node_options: '',\n  npm_config_init_version: '1.0.0',\n  npm_config_init_author_name: '',\n  npm_config_git: 'git',\n  ....\n}\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("node 处理 scripts 中的参数，除了属性后面的第一个命令，以空格分割的任何字符串(除特别shell语法)都是参数，并且都能通过 process.argv 属性访问。process.argv 属性返回一个数组，数组包含了启动 node 进程时的命令行参数。第一个元素为启动 node 进程的可执行文件的绝对路径名 process.execPath,第二个元素为当前执行的 jacascript 文件路径。剩余的元素为其他命令行参数。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\"scripts\":{\n  \"serve\": \"vue-cli-service serve --mode=dev --mobile -config build/example.js\"\n}\n执行\nnpm run serve\n\n打印 process.argv 为:\n[ '/usr/local/Cellar/node/12.14.1/bin/node',\n  '/Users/mac/Vue-projects/hao-cli/node_modules/.bin/vue-cli-service',\n  'serve',\n  '--mode=dev',\n  '--mobile',\n  '-config',\n  'build/example.js']\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[s._v("再列举几个传参可能有的方式")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm run serve --params  // 参数params将转化成process.env.npm_config_params = true\nnpm run serve --params=123 // 参数params将转化成process.env.npm_config_params = 123\nnpm run serve -params  // 等同于--params参数\n\nnpm run serve -- --params  // 将--params参数添加到process.env.argv数组中\nnpm run serve params  // 将params参数添加到process.env.argv数组中\nnpm run serve -- params  // 将params参数添加到process.env.argv数组中\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"执行顺序"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#执行顺序"}},[s._v("#")]),s._v(" 执行顺序")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v(" npm run script1.js & npm run script2.js 并行任务(同时的平行执行)，使用&符号\n npm run script1.js && npm run script2.js 串行任务(前一个任务成功，才执行下一个任务)，使用 && 符号\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"npm-config"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-config"}},[s._v("#")]),s._v(" npm config")]),s._v(" "),n("p",[s._v("npm cli 提供了 npm config 命令进行 npm 相关配置，通过 npm config ls -l 可查看 npm 的所有配置，包括默认配置。npm 文档页为每个配置项提供了详细的说明 https://docs.npmjs.com/misc/config . 修改配置的命令为 npm config set, 我们使用相关的常见重要配置:")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm config set registry https://registry.npm.taobao.org\nnpm config set registry https://registry.npmjs.org\nnpm config ls\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"npmrc-文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npmrc-文件"}},[s._v("#")]),s._v(" npmrc 文件")]),s._v(" "),n("p",[s._v("除了使用 CLI 的 npm config 命令显示更改 npm 配置，还可以通过 npmrc 文件直接修改配置。\n这样的 npmrc 文件优先级由高到低包括：")]),s._v(" "),n("ul",[n("li",[s._v("工程内配置文件: /path/to/my/project/.npmrc")]),s._v(" "),n("li",[s._v("用户级配置文件: ~/.npmrc")]),s._v(" "),n("li",[s._v("全局配置文件: $PREFIX/etc/npmrc (即npm config get globalconfig 输出的路径)")]),s._v(" "),n("li",[s._v("npm内置配置文件:/path/to/npm/npmrc")])]),s._v(" "),n("h1",{attrs:{id:"npm-包发布"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-包发布"}},[s._v("#")]),s._v(" npm 包发布")]),s._v(" "),n("h2",{attrs:{id:"规范的-npm-模块目录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#规范的-npm-模块目录"}},[s._v("#")]),s._v(" 规范的 npm 模块目录")]),s._v(" "),n("p",[s._v("一个 node.js 模块是基于 CommonJS 模块化规范实现的，严格按照 CommonJS 规范，模块目录下除了必须包含包描述文件 package.json 以外，还需要包含以下目录：")]),s._v(" "),n("ul",[n("li",[s._v("bin：存放可执行二进制文件的目录")]),s._v(" "),n("li",[s._v("lib：存放js代码的目录")]),s._v(" "),n("li",[s._v("doc：存放文档的目录")]),s._v(" "),n("li",[s._v("test：存放单元测试用例代码的目录")])]),s._v(" "),n("h2",{attrs:{id:"如何写好一个模块的-readme-文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#如何写好一个模块的-readme-文件"}},[s._v("#")]),s._v(" "),n("a",{attrs:{href:"https://www.zhihu.com/question/29100816",target:"_blank",rel:"noopener noreferrer"}},[s._v("如何写好一个模块的 README 文件"),n("OutboundLink")],1)]),s._v(" "),n("h2",{attrs:{id:"如何发布自己的-npm-包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#如何发布自己的-npm-包"}},[s._v("#")]),s._v(" 如何发布自己的 npm 包")]),s._v(" "),n("ol",[n("li",[s._v("先去 npm 注册个账号，然后在命令行使用,然后npm adduser #根据提示输入用户名密码即可")]),s._v(" "),n("li",[s._v("使用命令发布你的包，在推送之前，可以通过配置一个 .npmignore 文件来排除一些文件, 防止大量的垃圾文件推送到 npm, 规则上和你用的 .gitignore 是一样的。.gitignore 文件也可以充当 .npmignore 文件")]),s._v(" "),n("li",[s._v("发布成功之后，你就可以像下载安装其他包一样使用你自己的开发工具了")])]),s._v(" "),n("h2",{attrs:{id:"关于-npm-包的更新"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关于-npm-包的更新"}},[s._v("#")]),s._v(" 关于 npm 包的更新")]),s._v(" "),n("p",[s._v("更新 npm 包也是使用 npm publish 命令发布，不过必须更改 npm 包的版本号，即 package.json 的 version 字段，否则会报错，同时我们应该遵 Semver(语义化版本号) 规范，npm 提供了 npm version 给我们升级版本")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 升级补丁版本号\n$ npm version patch\n\n# 升级小版本号\n$ npm version minor\n\n# 升级大版本号\n$ npm version major\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"本地开发的-npm-包如何调试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#本地开发的-npm-包如何调试"}},[s._v("#")]),s._v(" 本地开发的 npm 包如何调试")]),s._v(" "),n("p",[s._v("在本地开发的模块包的时候，可以使用 npm link 调试，将模块链接到对应的运行项目中去，方便地对模块进行调试和测试。具体使用步骤如下")]),s._v(" "),n("ol",[n("li",[s._v("假如我的项目是 koalaNpmStudy，假如我的 npm 模块包名称是 npm-ikoala")]),s._v(" "),n("li",[s._v("进入到 模块包 npm-ikoala 目录中，执行 npm link")]),s._v(" "),n("li",[s._v("在自己的项目 koalaNpmStudy 中创建连接执行 npm link npm-ikoala")]),s._v(" "),n("li",[s._v("在自己项目的 node_module 中会看到链接过来的模块包，然后就可以像使用其他的模块包一样使用它了。")]),s._v(" "),n("li",[s._v("调试结束后可以使用 npm unlink 取消关联")])]),s._v(" "),n("blockquote",[n("p",[s._v("npm link 主要做了两件事：")]),s._v(" "),n("p",[s._v("为目标 npm 模块创建软链接，将其链接到全局 node 模块安装路径 /usr/local/lib/node_modules/。")]),s._v(" "),n("p",[s._v("为目标 npm 模块的可执行 bin 文件创建软链接，将其链接到全局 node 命令安装路径 /usr/local/bin/。")])])])}),[],!1,null,null,null);n.default=e.exports}}]);